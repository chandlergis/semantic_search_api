# 双文件实时比对前端样式模拟 (Frontend Mockup)

这是一个使用字符（ASCII art）模拟的双文件实时比对功能的前端页面样式。

## 页面模拟

```
+--------------------------------------------------+           +--------------------------------------------------+
|  File A: report-v1.docx                          |           |  File B: report-v2.docx                          |
+--------------------------------------------------+           +--------------------------------------------------+
|                                                  |           |                                                  |
|  这是文档A的第一段，这里没有发现相似内容。         |           |  这是文档B的第一段，内容也完全不同。             |
|                                                  |           |                                                  |
|  ************************************************  |           |  ************************************************  |
|  *我们建议采用最新的技术方案来优化现有流程，*<--+----------->*我们建议采用最新的技术方案来优化现有流程，*  |
|  *从而提升整体的系统性能和稳定性。*          |  |           |  *从而提升整体的系统性能和稳定性。*          |
|  ************************************************  |  |           |  ************************************************  |
|                                                  |  |           |                                                  |
|  接下来是第三段，这里的内容没有什么特别之处。      |  |           |  ++++++++++++++++++++++++++++++++++++++++++++++++  |
|                                                  |  |           |  +在项目管理方面，我们需要一个清晰的路线图+<---+|
|  ++++++++++++++++++++++++++++++++++++++++++++++++  |  |           |  +和时间表来确保项目按时交付。+            |
|  +在项目管理上，我们需要一个明确的路线图+<---------+           |  ++++++++++++++++++++++++++++++++++++++++++++++++  |
|  +和时间表，以确保项目可以按期交付。+          |           |                                                  |
|  ++++++++++++++++++++++++++++++++++++++++++++++++  |           |  文档B的最后一段，没有匹配项。                 |
|                                                  |           |                                                  |
+--------------------------------------------------+           +--------------------------------------------------+
```

## 图例说明

```
******************
* Red Highlight  *  =>  红色高亮: 高度相似 (例如，相似度 > 90%)
******************

++++++++++++++++++
+ Yellow Highlight +  =>  黄色高亮: 可能相似 (例如，相似度 70%-90%)
++++++++++++++++++

<-------------->      =>  同步滚动链接: 表示这两块内容相互关联，滚动时会互相定位。
```

## 数据驱动

此视觉效果由后端API (`POST /api/compare/files`) 返回的JSON数据结构驱动。后端负责计算差异和相似度，前端则根据JSON中的 `highlight` 和 `match_links` 信息来渲染颜色和实现同步滚动。

## 前端技术栈选型建议

为了实现文档预览和高亮功能，前端需要选择合适的技术栈。

### 核心思路

最佳实践是**在后端将所有支持的文档格式（如 PDF, DOCX）统一转换为 HTML**。这样做的好处是：
1.  **前端处理统一**：前端无需关心原始文件格式，只需渲染两个 HTML 内容块。
2.  **高亮和交互精确**：后端可以在转换后的 HTML 中，直接为需要高亮的文本块包裹上带有特定 `id` 或 `class` 的 `<span>` 标签。前端只需编写简单的 CSS 规则即可实现高亮，并可利用 `id` 实现精确的同步滚动。

### 建议技术栈

*   **Vue.js**: 作为核心前端框架。
*   **渲染**：
    *   由于后端已经将文档转为 HTML，前端可以直接使用 Vue 的 `v-html` 指令来渲染内容。
    *   **注意**：使用 `v-html` 时，必须确保后端输出的 HTML是经过严格清理和消毒的，以防止 XSS (跨站脚本) 攻击。

### 备选/辅助方案 (如果选择前端解析)

如果业务场景要求在前端直接处理原始文件，可以考虑以下库：

*   **处理 PDF**:
    *   **`vue-pdf`** 或 Mozilla 的 **`pdf.js`** (vue-pdf 的底层依赖): 非常适合渲染 PDF。它们能够访问 PDF 的文本层，允许通过 JavaScript 计算文本位置并叠加高亮层。
*   **处理 DOCX**:
    *   **`mammoth.js`**: 可以将 `.docx` 文件直接在浏览器中转换为 HTML。转换后，可以再对 HTML 进行处理以添加高亮。

### 结论

**首选方案**是依赖一个强大的**后端服务**进行文档到 HTML 的转换和预处理（注入高亮标签），前端 Vue.js 只负责渲染和交互。这种架构解耦了文件解析和前端展示，更加健壮和灵活。